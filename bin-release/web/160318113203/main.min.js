var GameUtil;!function(t){var e=function(t){function e(){t.call(this),this.mStageW=egret.MainContext.instance.stage.stageWidth,this.mStageH=egret.MainContext.instance.stage.stageHeight,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(t){this.init()},p.init=function(){},e}(egret.DisplayObjectContainer);t.BassPanel=e,egret.registerClass(e,"GameUtil.BassPanel");var i=function(){function e(){}var i=(__define,e);return p=i.prototype,e.init=function(t){this.MainStage=t},e.runscene=function(e,i,s){if(void 0===i&&(i=t.GameConfig.NullAction),void 0===s&&(s=800),null==this.curScene)return this.curScene=e,void this.MainStage.addChild(this.curScene);if(i==t.GameConfig.NullAction)return null!=this.curScene&&this.MainStage.removeChild(this.curScene),this.curScene=e,void this.MainStage.addChild(this.curScene);this.nextScene=e,this.MainStage.addChild(this.nextScene),i==t.GameConfig.TransAlpha&&(this.nextScene.alpha=0,egret.Tween.get(this.curScene).to({alpha:0},s),egret.Tween.get(this.nextScene).to({alpha:1},s)),i==t.GameConfig.CrossLeft&&(this.nextScene.x=-this.MainStage.stageWidth,egret.Tween.get(this.curScene).to({x:this.MainStage.stageWidth},s),egret.Tween.get(this.nextScene).to({x:0},s)),i==t.GameConfig.OpenDoor;var n=this;egret.setTimeout(function(){n.MainStage.removeChild(n.curScene),n.curScene=n.nextScene},this,s)},e.curScene=null,e.nextScene=null,e.MainStage=null,e}();t.GameScene=i,egret.registerClass(i,"GameUtil.GameScene")}(GameUtil||(GameUtil={}));var GameScene=function(t){function e(){t.call(this),this.curstage=1,this.curtouchdone=0}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.gamestate=GameState.gaming,this.curtouchdone=0,this.show()},p.show=function(){this.touchre=[],this.discovercont=new egret.DisplayObjectContainer;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,1,16777215);this.addChild(t),this.curstagetext=new GameUtil.MyTextField(22,GameUtil.setscreenY(1237),40,0),this.curstagetext.setText("Stage "+this.curstage+"/10"),this.addChild(this.curstagetext),this.addChild(TimePanel._i());for(var e=0;3>e;e++){var i=new Tiptool(RES.getRes("tiptool_png"),396+85*e,GameUtil.setscreenY(1237));this.addChild(i)}var s=new GameUtil.Menu(this,"pausebtn_png","pausebtn_png",this.pausegame);s.x=659,s.y=GameUtil.setscreenY(1238),this.addChild(s),this.addChild(AdaptGamelayer._i()),AdaptGamelayer._i().initlayer(this.mStageH-136),this.showAdapLayer(),AdaptGamelayer._i().adpat()},p.showAdapLayer=function(){this.touchre=[];for(var t=["uppic","downpic"],e=0;2>e;e++){var i=new GameUtil.MyBitmap(RES.getRes(t[e]+this.curstage+"_png"),378,300+602*e);i.x=i.$getWidth()/2,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchgamescene,this),i.x=378,i.y=300+602*e,AdaptGamelayer._i().putItme(i)}for(var s=[[689,297,342,273,168],[689,297,342,273,168]],n=[[57,236,362,538,414],[57,236,362,538,414]],a=0;10>a;a++)this.touchre[a]=new Touchrect(s[this.curstage-1][a%5],n[this.curstage-1][a%5]+602*Math.floor(a/5),a),this.touchre[a].graphics.beginFill(0,0),this.touchre[a].graphics.drawRect(0,0,100,100),this.touchre[a].graphics.endFill(),this.touchre[a].$setAnchorOffsetX(50),this.touchre[a].$setAnchorOffsetY(50),AdaptGamelayer._i().putItme(this.touchre[a])},p.pausegame=function(){this.gamestate=GameState.gamepause,this.addChild(this.discovercont),this.discovercont.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.9);this.discovercont.addChild(t);var e=new GameUtil.Menu(this,"continubtn_png","continubtn_png",this.continugame);e.x=this.mStageW/2,e.y=GameUtil.setscreenY(591),this.discovercont.addChild(e);var i=new GameUtil.Menu(this,"backhomebtn_png","backhomebtn_png",this.backhome);i.x=this.mStageW/2,i.y=e.y+183,this.discovercont.addChild(i)},p.continugame=function(){this.gamestate=GameState.gaming,this.removeChild(this.discovercont)},p.backhome=function(){egret.clearInterval(TimePanel._i().intervaltag),GameUtil.GameScene.runscene(new StartGameScene)},p.touchgamescene=function(t){var e=new GameUtil.MyBitmap(RES.getRes("wrongpic_png"),t.stageX,t.stageY);this.addChild(e);var i=this;egret.setTimeout(function(){i.removeChild(e)},this,500)},p.nextgame=function(){10==this.curstage?this.passgame():(this.curstage++,this.curstagetext.setText("Stage "+this.curstage+"/10"),TimePanel._i().reset(),AdaptGamelayer._i().removeChildren(),this.showAdapLayer(),AdaptGamelayer._i().adpat())},p.gameover=function(){console.log("gameoverfjdksal;"),this.gamestate=GameState.gameover,this.addChild(this.discovercont),this.discovercont.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);this.discovercont.addChild(t);var e=new GameUtil.MyBitmap(RES.getRes("failframe_png"),this.mStageW/2,GameUtil.setscreenY(693));this.discovercont.addChild(e);var i=new GameUtil.MyTextField(this.mStageW/2,e.y-135,50);i.$setWidth(422),i.setText("还差一点就通关了再接再励哦!!!"),i.textAlign=egret.HorizontalAlign.CENTER,this.discovercont.addChild(i);var s=new GameUtil.Menu(this,"playagainbtn_png","playagainbtn_png",this.playagain);s.x=this.mStageW/2,s.y=e.y+25,this.discovercont.addChild(s);var n=new GameUtil.Menu(this,"sharebtn_png","sharebtn_png",this.sharegmae);n.x=this.mStageW/2,n.y=s.y+131,this.discovercont.addChild(n)},p.passgame=function(){egret.clearInterval(TimePanel._i().intervaltag),this.gamestate=GameState.gameover,this.addChild(this.discovercont),this.discovercont.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);this.discovercont.addChild(t);var e=new GameUtil.MyBitmap(RES.getRes("successframe_png"),this.mStageW/2,GameUtil.setscreenY(693));this.discovercont.addChild(e);var i=new GameUtil.MyBitmap(RES.getRes("passtext_png"),this.mStageW/2,e.y-135);this.discovercont.addChild(i);var s=new GameUtil.Menu(this,"playagainbtn_png","playagainbtn_png",this.playagain);s.x=this.mStageW/2,s.y=e.y+25,this.discovercont.addChild(s);var n=new GameUtil.Menu(this,"sharebtn_png","sharebtn_png",this.sharegmae);n.x=this.mStageW/2,n.y=s.y+131,this.discovercont.addChild(n)},p.playagain=function(){this.curstage=1,this.curstagetext.setText("Stage "+this.curstage+"/10"),TimePanel._i().reset(),AdaptGamelayer._i().removeChildren(),this.showAdapLayer(),AdaptGamelayer._i().adpat(),GameUtil.GameScene.runscene(e._i())},p.sharegmae=function(){console.log("sharegame")},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(GameUtil.BassPanel);egret.registerClass(GameScene,"GameScene");var AdaptGamelayer=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.initlayer=function(t){this.maxheight=t},p.putItme=function(t){this.addChild(t)},p.adpat=function(){var t=1;this.$getHeight()>this.maxheight&&(t=this.maxheight/this.$getHeight(),this.scaleX=this.scaleY=t);var e=(this.mStageW-this.$getWidth()*t)/2;this.x=e},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(GameUtil.BassPanel);egret.registerClass(AdaptGamelayer,"AdaptGamelayer");var GameUtil;!function(t){var e=function(t){function e(e,i,s){t.call(this),this.init(e,i,s)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(t,e,i){this.texture=t,this.$setX(e),this.$setY(i),this.setanchorOff(.5,.5)},p.setNewTexture=function(t){this.texture=t,this.setanchorOff(.5,.5)},p.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},e}(egret.Bitmap);t.MyBitmap=e,egret.registerClass(e,"GameUtil.MyBitmap")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,s,n,a){t.call(this,RES.getRes(e+"1"),n,a),this.currentNumber=1,this.countNumber=0,this.bLoopCount=0,this.endcallfun=null,this.thisObj=null,this.textureName=e,this.totalNumber=i,this.frameRate=s}__extends(e,t);var i=(__define,e);return p=i.prototype,p.setLoop=function(t){0==t&&(t=1),this.bLoopCount=t-1},p.play=function(){this.intervaltag=egret.setInterval(this.run,this,this.frameRate)},p.run=function(){this.nextFrame()},p.stop=function(){egret.clearInterval(this.intervaltag)},p.nextFrame=function(){if(this.currentNumber++,this.currentNumber>=this.totalNumber){if(this.currentNumber=1,0==this.bLoopCount)return this.stop(),null!=this.endcallfun&&this.endcallfun.apply(this.thisObj),void this.parent.removeChild(this);this.bLoopCount>0&&this.bLoopCount--}this.setNewTexture(RES.getRes(this.textureName+this.currentNumber))},p.setendcall=function(t,e){this.thisObj=e,this.endcallfun=t},e}(t.MyBitmap);t.Animation=e,egret.registerClass(e,"GameUtil.Animation")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,s){void 0===i&&(i=0),void 0===s&&(s=0),t.call(this),this.imgUrl=e,this.imgwidth=i,this.imgheight=s,this.init()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){RES.getResByUrl(this.imgUrl,this.comp,this,RES.ResourceItem.TYPE_IMAGE)},p.comp=function(t){this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},p.getimg=function(){return this.imag},e}(egret.DisplayObjectContainer);t.GetImageByUrl=e,egret.registerClass(e,"GameUtil.GetImageByUrl")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,s){void 0===i&&(i=0),void 0===s&&(s=0),t.call(this),this.imgUrl=e,this.imgwidth=i,this.imgheight=s,this.init()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){RES.getResAsync(this.imgUrl,this.comp,this)},p.comp=function(t){this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},e}(egret.DisplayObjectContainer);t.GetResByany=e,egret.registerClass(e,"GameUtil.GetResByany")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(){function e(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.init(t,e)}var i=(__define,e);return p=i.prototype,p.init=function(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.urlLoader=new egret.URLLoader,this.urlLoader.dataFormat=e,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlRequest=new egret.URLRequest,this.urlRequest.method=t},p.loaded=function(t){this.urlLoader.removeEventListener(egret.Event.COMPLETE,this.loaded,this),this.thisObj.removeChild(this.coverBg);var e=JSON.parse(this.urlLoader.data);null!=this.onLoader&&this.onLoader.apply(this.thisObj,[e])},p.send=function(e,i,s,n,a){void 0===s&&(s=null),void 0===n&&(n=null),void 0===a&&(a=t.GameConfig.IP),this.urlRequest.url="Http://"+a+i,this.onLoader=s,this.thisObj=n;var r=new egret.URLVariables(t.objectToString(e));this.urlRequest.data=r,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlLoader.load(this.urlRequest),this.coverBg=t.createRect(0,0,window.screen.availWidth,window.screen.availHeight,0),this.thisObj.addChild(this.coverBg),this.coverBg.touchEnabled=!0},p.setReqMethod=function(t){this.urlRequest.method=t},e.getinstance=function(t,i){return void 0===t&&(t=egret.URLRequestMethod.POST),void 0===i&&(i=egret.URLLoaderDataFormat.TEXT),null==e._instance&&(e._instance=new e(t,i)),e._instance},e}();t.Http=e,egret.registerClass(e,"GameUtil.Http")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,s,n,a){void 0===n&&(n=.5),void 0===a&&(a=.5),t.call(this),this.init(e,i,s,n,a)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(t,e,i,s,n){this.textColor=0,this.fontFamily="楷体",this.$setX(t),this.$setY(e),this.$setSize(i),this.anchorX=s,this.anchorY=n},p.setText=function(t){this.text=t,this.setanchorOff(this.anchorX,this.anchorY)},p.setSize=function(t){this.size=t,this.setanchorOff(this.anchorX,this.anchorY)},p.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},e}(egret.TextField);t.MyTextField=e,egret.registerClass(e,"GameUtil.MyTextField")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,s,n,a,r,h){void 0===r&&(r=.5),void 0===h&&(h=.5),t.call(this,e,i,s,r,h),this.width=n,this.height=s,this.type=egret.TextFieldType.INPUT,this.baseText="",this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onFocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.setBaseText=function(t,e){this.baseText=t,this.baseTextAlpha=e,this.setText(this.baseText),this.alpha=this.baseTextAlpha},p.setBaseTextSize=function(t,e){this.basetextsize=t,this.sourcesize=e,this.text==this.baseText&&(this.setSize(this.basetextsize),this.height=t)},p.onFocusIn=function(t){this.text==this.baseText&&(this.setText(""),this.height=this.sourcesize,this.setSize(this.sourcesize),this.alpha=1)},p.onFocusOut=function(t){""==this.text&&(this.setText(this.baseText),this.alpha=this.baseTextAlpha,this.height=this.basetextsize,this.setSize(this.basetextsize))},e}(t.MyTextField);t.InputTextFiled=e,egret.registerClass(e,"GameUtil.InputTextFiled")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(){function t(t,e){this.loadedfun=t,this.thisObj=e,this.loadingRes()}var e=(__define,t);return p=e.prototype,p.loadingRes=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},p.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preloading")},p.onResourceLoadComplete=function(t){"preloading"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},p.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},p.onResourceProgress=function(t){"preloading"==t.groupName},t}();t.LoadingLogopre=e,egret.registerClass(e,"GameUtil.LoadingLogopre")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,s,n,a,r){void 0===s&&(s=0),void 0===n&&(n=0),void 0===a&&(a=!1),void 0===r&&(r=4),this.loadedfun=t,this.thisObj=i,this.IsGif=a,this.gifTotalcount=r,this.loadingbarOffX=s,this.loadingbarOffY=n,e.call(this)}__extends(i,e);var s=(__define,i);return p=s.prototype,p.init=function(){new t.LoadingLogopre(this.onComplete,this)},p.onComplete=function(e){if(this.IsGif)this.gifruncount=0,this.loadingbar=new t.MyBitmap(RES.getRes("loadinggif0_png"),this.mStageW/2+this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.addChild(this.loadingbar),egret.setInterval(this.rungif,this,150);else{this.loadingbar=new t.MyBitmap(RES.getRes("loadingbar_png"),this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.loadingbar.anchorOffsetX=0;var i=this.loadingbar.texture.textureWidth-8,s=this.loadingbar.texture.textureHeight-8,n=new egret.Rectangle(4,4,i,s);this.loadingbar.scale9Grid=n,this.addChild(this.loadingbar),this.loadingbar.width=10}this.loadingRes()},p.rungif=function(){this.gifruncount++,this.gifruncount>=this.gifTotalcount&&(this.gifruncount=0),this.loadingbar.setNewTexture(RES.getRes("loadinggif"+this.gifruncount+"_png"))},p.loadingRes=function(){this.loadingView=new LoadingUI,this.loadingView.x=this.mStageW/2,this.loadingView.y=this.mStageH/2+this.loadingbar.height/2+30,this.addChild(this.loadingView),this.loadingView.anchorOffsetX=this.loadingView.width/2,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},p.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},p.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},p.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},p.onResourceProgress=function(t){"preload"==t.groupName&&(this.IsGif||this.setPro(t.itemsLoaded/t.itemsTotal),this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal))},p.setPro=function(t){this.loadingbar.width=this.loadingbar.texture.textureWidth*t},p.getPro=function(){return this.loadingbar.width/this.loadingbar.texture.textureWidth},i}(t.BassPanel);t.LoadingPanel=e,egret.registerClass(e,"GameUtil.LoadingPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,s,n,a){void 0===n&&(n=null),void 0===a&&(a=null),e.call(this),this.menuNormalTexture=null,this.menuSelectTexture=null,this.bScaleMode=!1,this.mScale=.9,this.isActive=!1,this.thisObj=t,this.param=a,this.init(i,s,n)}__extends(i,e);var s=(__define,i);return p=s.prototype,p.init=function(e,i,s){void 0===s&&(s=null),this.menuNormalTexture=RES.getRes(e),this.menuSelectTexture=RES.getRes(i),this.backFun=s,this.btnImg=new t.MyBitmap(this.menuNormalTexture,0,0),this.addChild(this.btnImg),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.TouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.TouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.TouchCancel,this)},p.setBackFun=function(t){this.backFun=t},p.setScaleMode=function(t){void 0===t&&(t=.9),this.bScaleMode=!0,this.mScale=t},p.setButtonTexture=function(t,e){this.menuNormalTexture=RES.getRes(t),this.menuSelectTexture=RES.getRes(e),this.btnImg.setNewTexture(this.menuNormalTexture)},p.addButtonImg=function(e,i,s){void 0===i&&(i=0),void 0===s&&(s=0),this.addImg=new t.MyBitmap(RES.getRes(e),i,s),this.addChild(this.addImg)},p.setAddImgTexture=function(t){this.addImg.setNewTexture(RES.getRes(t))},p.addButtonText=function(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0),null!=this.btnImg.texture?(console.log("fdsafdsafdsa=====",this.btnImg.texture.$getTextureWidth()/2),this.mTextField=new t.MyTextField(s,n,i)):this.mTextField=new t.MyTextField(s,n,i),this.mTextField.setText(e),this.addChild(this.mTextField)},p.getBtnText=function(){return this.mTextField},p.setBtnScale=function(t,e){this.btnImg.scaleX=t,this.btnImg.scaleY=e},p.TouchBegin=function(t){this.btnImg.setNewTexture(this.menuSelectTexture),this.bScaleMode&&(this.scaleX=this.scaleY=this.mScale),this.isActive=!0},p.TouchMove=function(t){},p.TouchEnd=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive&&this.backFun.apply(this.thisObj,this.param),this.isActive=!1},p.TouchCancel=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive=!1},i}(egret.DisplayObjectContainer);t.Menu=e,egret.registerClass(e,"GameUtil.Menu")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,s,n,a,r){void 0===a&&(a=0),void 0===r&&(r=.5),e.call(this),this.mPercent=100,this.init(t,i,s,n,a,r)}__extends(i,e);var s=(__define,i);return p=s.prototype,p.init=function(e,i,s,n,a,r){this.progressbar=new t.MyBitmap(RES.getRes(e),i,s),this.addChild(this.progressbar),this.progressbar.scale9Grid=n,this.progressbar.setanchorOff(a,r)},p.setbarX=function(t){this.progressbar.x=t},p.setbarY=function(t){this.progressbar.y=t},p.setPercent=function(t){0>t||(this.mPercent=t,this.updateWidth())},p.getPercent=function(){return this.mPercent},p.updateWidth=function(){this.progressbar.width=this.progressbar.texture.textureWidth*this.mPercent},i}(egret.DisplayObjectContainer);t.ProgressBar=e,egret.registerClass(e,"GameUtil.ProgressBar")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i){e.call(this),this.item=[],this.curseltTag=0,this.itemCount=-1,this.normalTexture=t,this.selectTexture=i,this.init()}__extends(i,e);var s=(__define,i);return p=s.prototype,p.init=function(){},p.addItem=function(e,i,s){this.itemCount++;var n=new egret.DisplayObjectContainer,a=new t.Menu(this,this.normalTexture,this.normalTexture,this.chooseButton,[this.itemCount]);a.x=i,a.y=s,n.addChild(a),e.x=i+a.width/2+e.width/2,e.y=s,n.addChild(e),this.item.push(a),this.addChild(n),0==this.itemCount&&a.setButtonTexture(this.selectTexture,this.selectTexture)},p.chooseButton=function(t){if(t!=this.curseltTag){var e=this.item[t];e.setButtonTexture(this.selectTexture,this.selectTexture);var i=this.item[this.curseltTag];i.setButtonTexture(this.normalTexture,this.normalTexture),this.curseltTag=t}},p.getCurSelectTag=function(){return this.curseltTag},i}(egret.DisplayObjectContainer);t.RadioButton=e,egret.registerClass(e,"GameUtil.RadioButton")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,s){void 0===s&&(s=.5),t.call(this),this.scrollview=new egret.ScrollView,this.content=new egret.DisplayObjectContainer,this.addChild(this.scrollview),this.scrollview.width=e,this.scrollview.height=i,this.scrollview.scrollSpeed=s,this.init()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.scrollview.setContent(this.content)},p.putItem=function(t){this.content.addChild(t)},p.clearItem=function(){this.content.removeChildren()},p.getScorllTop=function(){return this.scrollview.scrollTop},p.setScorllTop=function(t){this.scrollview.scrollTop=t},e}(egret.DisplayObjectContainer);t.ScrollView=e,egret.registerClass(e,"GameUtil.ScrollView")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,s,n){void 0===s&&(s=!1),void 0===n&&(n=1200),e.call(this),this.textsize=30,this.mStageW=egret.MainContext.instance.stage.stageWidth,this.mStageH=egret.MainContext.instance.stage.stageHeight,this.tipText=i,this.tipImg=t,this.bDisappear=s,this.disSecond=n,this.init()}__extends(i,e);var s=(__define,i);return p=s.prototype,p.init=function(){if(!this.bDisappear){var e=t.createRect(0,0,window.screen.availWidth,window.screen.availHeight,.4);this.addChild(e),this.touchEnabled=!0}if(null==this.tipImg){var i=t.createRect(this.mStageW/2,this.mStageH/2,window.screen.availWidth,100,1,9210760);i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.addChild(i)}else this.tipbg=new t.MyBitmap(RES.getRes(this.tipImg),this.mStageW/2,this.mStageH/2),this.addChild(this.tipbg);if(this.showtip(),this.bDisappear){var s=egret.Tween.get(this);s.to({alpha:1},300).to({alpha:0},this.disSecond).call(this.close,this)}else this.showbutton()},p.showtip=function(){this.text=new t.MyTextField(this.mStageW/2,this.mStageH/2,this.textsize),this.text.setText(this.tipText),this.text.textColor=0,this.addChild(this.text)},p.setTextwidth=function(t){this.text.width=t},p.setTextSize=function(t){this.text.setSize(t)},p.setTextHor=function(t,e,i,s){this.text.textAlign=i,this.text.x=this.mStageW/2-this.tipbg.width/2+s},p.setTextlineSpacing=function(t){this.text.lineSpacing=t},p.showbutton=function(){var e=new t.Menu(this,"acceptBtn_png","acceptBtn_png",this.close);e.x=this.mStageW/2,e.y=this.mStageH/2+this.tipbg.texture.textureHeight/2,this.addChild(e),e.setScaleMode()},p.close=function(){this.parent.removeChild(this)},i}(egret.DisplayObjectContainer);t.TipsPanel=e,egret.registerClass(e,"GameUtil.TipsPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t){void 0===t&&(t=0),e.call(this),this.init(t)}__extends(i,e);var s=(__define,i);return p=s.prototype,p.init=function(e){this.coverBg=t.createRect(0,0,640,1136,0),this.addChild(this.coverBg),this.touchEnabled=!0},p.setAlpha=function(t){this.coverBg.alpha=t},i.getInstace=function(){return null==this._instance&&(this._instance=new t.WaitServerPanel(0)),this._instance},i}(egret.DisplayObjectContainer);t.WaitServerPanel=e,egret.registerClass(e,"GameUtil.WaitServerPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){function e(t,e,i,s,n,a){void 0===n&&(n=1),void 0===a&&(a=0);var r=new egret.Shape;return r.x=t,r.y=e,r.graphics.beginFill(a,n),r.graphics.drawRect(0,0,i,s),r.graphics.endFill(),r}function i(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=0);var a=new egret.Shape;return a.x=t,a.y=e,a.graphics.beginFill(n,s),a.graphics.drawCircle(0,0,i),a.graphics.endFill(),a}function s(t){var e="";for(var i in t){var s=i+"="+t[i];e+=s+"&"}return e=e.substr(0,e.length-1)}function n(t){return/^[\u4e00-\u9fa5]+$/.test(t)}function a(t){return t=t.replace(/^/,"")}function r(t){return t=t.toUpperCase(),/^0\d{2,3}-?\d{7,11}$|^1\d{10}$/.test(t)}function h(t,e,i,s,n,a){var r=new egret.TextField;r.x=e,r.y=i,r.size=s,r.textAlign="center",r.textColor=a,r.text=n,t.addChild(r),r.anchorOffsetX=.5*r.width,r.anchorOffsetY=.5*r.height,egret.Tween.get(r).to({y:i-40},700),egret.Tween.get(r).to({alpha:0},700).call(function(){t.removeChild(r)},t)}function o(t,e){egret.localStorage.setItem(t,e)}function c(t){egret.localStorage.getItem(t)}function l(t){null!=t?egret.localStorage.removeItem(t):egret.localStorage.clear()}function u(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null}function d(e){return e>=t.GameConfig.DesignHeight/2?g._i().getSH()-(t.GameConfig.DesignHeight-e):e}var g=function(){function e(){this.stagetY=0}var i=(__define,e);return p=i.prototype,e._i=function(){return null==this._instance&&(this._instance=new t.GameConfig),this._instance},p.setStageHeight=function(t){this.stagetY=t},p.getSH=function(){return this.stagetY},e.IP="springmeeting.sxd55.com",e.bRunFPS=!1,e.NullAction=0,e.CrossLeft=1,e.TransAlpha=2,e.OpenDoor=3,e.DesignWidth=750,e.DesignHeight=1334,e._instance=null,e}();t.GameConfig=g,egret.registerClass(g,"GameUtil.GameConfig"),t.createRect=e,t.createCircle=i,t.objectToString=s,t.isChineseName=n,t.removeimag=a,t.isPhoneNum=r,t.numberUpDisp=h,t.saveLocalData=o,t.readLocalData=c,t.clearLocalData=l,t.getQueryString=u,t.setscreenY=d}(GameUtil||(GameUtil={}));var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},p.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var GameState;!function(t){t[t.gaming=0]="gaming",t[t.gamepause=1]="gamepause",t[t.gameover=2]="gameover"}(GameState||(GameState={}));var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(t){GameUtil.GameScene.init(this.stage),GameUtil.GameScene.runscene(new GameUtil.LoadingPanel(this.createGameScene,this,0,0,!0))},p.createGameScene=function(){window.screen.availHeight<window.screen.availWidth&&(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL),GameUtil.GameConfig._i().setStageHeight(this.stage.stageHeight),GameUtil.GameScene.runscene(new StartGameScene)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var StartGameScene=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.showbg()},p.showbg=function(){var t=new GameUtil.MyBitmap(RES.getRes("startbg_png"),this.mStageW/2,0);t.setanchorOff(.5,0),this.addChild(t);var e=new GameUtil.MyBitmap(RES.getRes("gametitle_png"),this.mStageW/2,421);this.addChild(e);var i=new GameUtil.Menu(this,"startbtn_png","startbtn_png",this.startgame);i.setScaleMode(),i.x=this.mStageW/2,i.y=GameUtil.setscreenY(940),this.addChild(i);var s=new GameUtil.Menu(this,"enjoymodebtn_png","enjoymodebtn_png",this.enjoymodegame);s.setScaleMode(),s.x=this.mStageW/2,s.y=GameUtil.setscreenY(1115),this.addChild(s)},p.startgame=function(){GameUtil.GameScene.runscene(GameScene._i())},p.enjoymodegame=function(){},e}(GameUtil.BassPanel);egret.registerClass(StartGameScene,"StartGameScene");var TimePanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.show()},p.show=function(){var t=new GameUtil.MyTextField(22,GameUtil.setscreenY(1304),40,0);t.setText("TIME:"),this.addChild(t);var e=new GameUtil.MyBitmap(RES.getRes("timeproframe_png"),417,GameUtil.setscreenY(1302));this.addChild(e),this.timebar=new GameUtil.MyBitmap(RES.getRes("timepro_png"),129,GameUtil.setscreenY(1302)),this.timebar.setanchorOff(0,.5),this.addChild(this.timebar),this.intervaltag=egret.setInterval(this.timerun,this,100)},p.timerun=function(){if(GameScene._i().gamestate!=GameState.gamepause){var t=this.timebar.$getScaleX();t-=.01,this.timebar.$setScaleX(t),0>=t&&(console.log("gameover"),GameScene._i().gameover(),egret.clearInterval(this.intervaltag))}},p.reset=function(){this.timebar.$setScaleX(1)},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(GameUtil.BassPanel);egret.registerClass(TimePanel,"TimePanel");var Tiptool=function(t){function e(e,i,s){t.call(this,e,i,s),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tip,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.tip=function(t){for(var e,i=0;5>i;i++)if(e=GameScene._i().touchre[i],!e.touchbool){e.touchdone(i);break}this.parent.removeChild(this)},e}(GameUtil.MyBitmap);egret.registerClass(Tiptool,"Tiptool");var Touchrect=function(t){function e(e,i,s){t.call(this),this.init(e,i,s)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(t,e,i){this.touchbool=!1,this.x=t,this.y=e,this.touchtag=i,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touch,this)},p.touch=function(t){this.touchdone(this.touchtag)},p.touchdone=function(t){if(!this.touchbool){this.touchbool=!0,this.touchtag<5?GameScene._i().touchre[this.touchtag+5].aptouch(t):GameScene._i().touchre[this.touchtag-5].aptouch(t);var e=new GameUtil.MyBitmap(RES.getRes("redcircle_png"),this.x,this.y);AdaptGamelayer._i().putItme(e),GameScene._i().curtouchdone++,5==GameScene._i().curtouchdone&&GameScene._i().nextgame(),console.log("tag====",this.touchtag)}},p.aptouch=function(t){this.touchbool=!0;var e=new GameUtil.MyBitmap(RES.getRes("redcircle_png"),this.x,this.y);AdaptGamelayer._i().putItme(e),console.log("tag====",this.touchtag)},e}(egret.Shape);egret.registerClass(Touchrect,"Touchrect");